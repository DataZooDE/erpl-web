name: Main Extension Distribution Pipeline
on: [push, pull_request, repository_dispatch]
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}-${{ github.head_ref || '' }}-${{ github.base_ref || '' }}-${{ github.ref != 'refs/heads/main' || github.sha }}
  cancel-in-progress: true

jobs:
  linux-distribution:
    needs: Linux
    uses: ./.github/workflows/Linux.yml
    with:
      extension-name: quack
      build_arm64: false
      secrets: inherit

  macos-distribution:
    needs: Linux
    uses: ./.github/workflows/MacOS.yml
    with:
      extension-name: quack
      secrets: inherit

  windows-distribution:
    needs: Linux
    uses: ./.github/workflows/Windows.yml
    with:
      extension-name: quack
      secrets: inherit